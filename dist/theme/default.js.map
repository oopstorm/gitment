{"version":3,"sources":["../../src/theme/default.js"],"names":["renderHeader","instance","meta","user","reactions","container","document","createElement","lang","className","likeButton","likedReaction","find","reaction","content","login","innerHTML","heartIcon","heart","classList","add","onclick","unlike","remove","like","appendChild","commentsCount","comments","issueLink","href","html_url","target","innerText","renderComments","commentReactions","currentPage","error","errorBlock","NOT_INITIALIZED_ERROR","admin","owner","map","x","toLowerCase","indexOf","initHint","initButton","setAttribute","init","catch","removeAttribute","alert","e","undefined","loading","length","emptyBlock","commentsList","forEach","createDate","Date","comment","created_at","updateDate","updated_at","commentItem","avatar_url","toDateString","toString","body_html","querySelector","id","unlikeAComment","likeAComment","imgTrigger","markdownBody","src","onload","clientHeight","maxCommentHeight","style","maxHeight","title","pageCount","Math","ceil","perPage","pagination","previousButton","goto","i","pageItem","nextButton","renderEditor","shouldDisable","disabledTip","isLoggingIn","spinnerIcon","loginLink","githubIcon","logout","writeField","previewField","textarea","oninput","height","window","getComputedStyle","parseInt","scrollHeight","querySelectorAll","writeTab","previewTab","focus","preview","value","trim","markdown","then","html","submitButton","post","renderFooter","render","state"],"mappings":"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","file":"default.js","sourcesContent":["import { github as githubIcon, heart as heartIcon, spinner as spinnerIcon } from '../icons'\r\nimport { NOT_INITIALIZED_ERROR } from '../constants'\r\n\r\nfunction renderHeader({ meta, user, reactions }, instance) {\r\n  const container = document.createElement('div')\r\n  container.lang = \"en-US\"\r\n  container.className = 'gitment-container gitment-header-container'\r\n\r\n  const likeButton = document.createElement('span')\r\n  const likedReaction = reactions.find(reaction => (\r\n    reaction.content === 'heart' && reaction.user.login === user.login\r\n  ))\r\n  likeButton.className = 'gitment-header-like-btn'\r\n  likeButton.innerHTML = `\r\n    ${heartIcon}\r\n    ${ likedReaction\r\n      ? 'Unlike'\r\n      : 'Like'\r\n    }\r\n    ${ meta.reactions && meta.reactions.heart\r\n      ? ` • <strong>${meta.reactions.heart}</strong> Liked`\r\n      : ''\r\n    }\r\n  `\r\n\r\n  if (likedReaction) {\r\n    likeButton.classList.add('liked')\r\n    likeButton.onclick = () => instance.unlike()\r\n  } else {\r\n    likeButton.classList.remove('liked')\r\n    likeButton.onclick = () => instance.like()\r\n  }\r\n  container.appendChild(likeButton)\r\n\r\n  const commentsCount = document.createElement('span')\r\n  commentsCount.innerHTML = `\r\n    ${ meta.comments\r\n    ? ` • <strong>${meta.comments}</strong> Comments`\r\n    : ''\r\n    }\r\n  `\r\n  container.appendChild(commentsCount)\r\n\r\n  const issueLink = document.createElement('a')\r\n  issueLink.className = 'gitment-header-issue-link'\r\n  issueLink.href = meta.html_url\r\n  issueLink.target = '_blank'\r\n  issueLink.innerText = 'Issue Page'\r\n  container.appendChild(issueLink)\r\n\r\n  return container\r\n}\r\n\r\nfunction renderComments({ meta, comments, commentReactions, currentPage, user, error }, instance) {\r\n  const container = document.createElement('div')\r\n  container.lang = \"en-US\"\r\n  container.className = 'gitment-container gitment-comments-container'\r\n\r\n  if (error) {\r\n    const errorBlock = document.createElement('div')\r\n    errorBlock.className = 'gitment-comments-error'\r\n\r\n    if (error === NOT_INITIALIZED_ERROR\r\n      && user.login\r\n      && ~(instance.admin || [instance.owner]).map(x=>x.toLowerCase()).indexOf(user.login.toLowerCase())) {\r\n      const initHint = document.createElement('div')\r\n      const initButton = document.createElement('button')\r\n      initButton.className = 'gitment-comments-init-btn'\r\n      initButton.onclick = () => {\r\n        initButton.setAttribute('disabled', true)\r\n        instance.init()\r\n          .catch(e => {\r\n            initButton.removeAttribute('disabled')\r\n            alert(e)\r\n          })\r\n      }\r\n      initButton.innerText = 'Initialize Comments'\r\n      initHint.appendChild(initButton)\r\n      errorBlock.appendChild(initHint)\r\n    } else {\r\n      errorBlock.innerText = error\r\n    }\r\n    container.appendChild(errorBlock)\r\n    return container\r\n  } else if (comments === undefined) {\r\n    const loading = document.createElement('div')\r\n    loading.innerText = 'Loading comments...'\r\n    loading.className = 'gitment-comments-loading'\r\n    container.appendChild(loading)\r\n    return container\r\n  } else if (!comments.length) {\r\n    const emptyBlock = document.createElement('div')\r\n    emptyBlock.className = 'gitment-comments-empty'\r\n    emptyBlock.innerText = 'No Comment Yet'\r\n    container.appendChild(emptyBlock)\r\n    return container\r\n  }\r\n\r\n  const commentsList = document.createElement('ul')\r\n  commentsList.className = 'gitment-comments-list'\r\n\r\n  comments.forEach(comment => {\r\n    const createDate = new Date(comment.created_at)\r\n    const updateDate = new Date(comment.updated_at)\r\n    const commentItem = document.createElement('li')\r\n    commentItem.className = 'gitment-comment'\r\n    commentItem.innerHTML = `\r\n      <a class=\"gitment-comment-avatar\" href=\"${comment.user.html_url}\" target=\"_blank\">\r\n        <img class=\"gitment-comment-avatar-img\" src=\"${comment.user.avatar_url}\"/>\r\n      </a>\r\n      <div class=\"gitment-comment-main\">\r\n        <div class=\"gitment-comment-header\">\r\n          <a class=\"gitment-comment-name\" href=\"${comment.user.html_url}\" target=\"_blank\">\r\n            ${comment.user.login}\r\n          </a>\r\n          commented on\r\n          <span title=\"${createDate}\">${createDate.toDateString()}</span>\r\n          ${ createDate.toString() !== updateDate.toString()\r\n            ? ` • <span title=\"comment was edited at ${updateDate}\">edited</span>`\r\n            : ''\r\n          }\r\n          <div class=\"gitment-comment-like-btn\">${heartIcon} ${comment.reactions.heart || ''}</div>\r\n        </div>\r\n        <div class=\"gitment-comment-body gitment-markdown\">${comment.body_html}</div>\r\n      </div>\r\n    `\r\n    const likeButton = commentItem.querySelector('.gitment-comment-like-btn')\r\n    const likedReaction = commentReactions[comment.id]\r\n      && commentReactions[comment.id].find(reaction => (\r\n        reaction.content === 'heart' && reaction.user.login === user.login\r\n      ))\r\n    if (likedReaction) {\r\n      likeButton.classList.add('liked')\r\n      likeButton.onclick = () => instance.unlikeAComment(comment.id)\r\n    } else {\r\n      likeButton.classList.remove('liked')\r\n      likeButton.onclick = () => instance.likeAComment(comment.id)\r\n    }\r\n\r\n    // dirty\r\n    // use a blank image to trigger height calculating when element rendered\r\n    const imgTrigger = document.createElement('img')\r\n    const markdownBody = commentItem.querySelector('.gitment-comment-body')\r\n    imgTrigger.className = 'gitment-hidden'\r\n    imgTrigger.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\"\r\n    imgTrigger.onload = () => {\r\n      if (markdownBody.clientHeight > instance.maxCommentHeight) {\r\n        markdownBody.classList.add('gitment-comment-body-folded')\r\n        markdownBody.style.maxHeight = instance.maxCommentHeight + 'px'\r\n        markdownBody.title = 'Click to Expand'\r\n        markdownBody.onclick = () => {\r\n          markdownBody.classList.remove('gitment-comment-body-folded')\r\n          markdownBody.style.maxHeight = ''\r\n          markdownBody.title = ''\r\n          markdownBody.onclick = null\r\n        }\r\n      }\r\n    }\r\n    commentItem.appendChild(imgTrigger)\r\n\r\n    commentsList.appendChild(commentItem)\r\n  })\r\n\r\n  container.appendChild(commentsList)\r\n\r\n  if (meta) {\r\n    const pageCount = Math.ceil(meta.comments / instance.perPage)\r\n    if (pageCount > 1) {\r\n      const pagination = document.createElement('ul')\r\n      pagination.className = 'gitment-comments-pagination'\r\n\r\n      if (currentPage > 1) {\r\n        const previousButton = document.createElement('li')\r\n        previousButton.className = 'gitment-comments-page-item'\r\n        previousButton.innerText = 'Previous'\r\n        previousButton.onclick = () => instance.goto(currentPage - 1)\r\n        pagination.appendChild(previousButton)\r\n      }\r\n\r\n      for (let i = 1; i <= pageCount; i++) {\r\n        const pageItem = document.createElement('li')\r\n        pageItem.className = 'gitment-comments-page-item'\r\n        pageItem.innerText = i\r\n        pageItem.onclick = () => instance.goto(i)\r\n        if (currentPage === i) pageItem.classList.add('gitment-selected')\r\n        pagination.appendChild(pageItem)\r\n      }\r\n\r\n      if (currentPage < pageCount) {\r\n        const nextButton = document.createElement('li')\r\n        nextButton.className = 'gitment-comments-page-item'\r\n        nextButton.innerText = 'Next'\r\n        nextButton.onclick = () => instance.goto(currentPage + 1)\r\n        pagination.appendChild(nextButton)\r\n      }\r\n\r\n      container.appendChild(pagination)\r\n    }\r\n  }\r\n\r\n  return container\r\n}\r\n\r\nfunction renderEditor({ user, error }, instance) {\r\n  const container = document.createElement('div')\r\n  container.lang = \"en-US\"\r\n  container.className = 'gitment-container gitment-editor-container'\r\n\r\n  const shouldDisable = user.login && !error ? '' : 'disabled'\r\n  const disabledTip = user.login ? '' : 'Login to Comment'\r\n  container.innerHTML = `\r\n      ${ user.login\r\n        ? `<a class=\"gitment-editor-avatar\" href=\"${user.html_url}\" target=\"_blank\">\r\n            <img class=\"gitment-editor-avatar-img\" src=\"${user.avatar_url}\"/>\r\n          </a>`\r\n        : user.isLoggingIn\r\n          ? `<div class=\"gitment-editor-avatar\">${spinnerIcon}</div>`\r\n          : `<a class=\"gitment-editor-avatar\" href=\"${instance.loginLink}\" title=\"login with GitHub\">\r\n              ${githubIcon}\r\n            </a>`\r\n      }\r\n    </a>\r\n    <div class=\"gitment-editor-main\">\r\n      <div class=\"gitment-editor-header\">\r\n        <nav class=\"gitment-editor-tabs\">\r\n          <button class=\"gitment-editor-tab gitment-selected\">Write</button>\r\n          <button class=\"gitment-editor-tab\">Preview</button>\r\n        </nav>\r\n        <div class=\"gitment-editor-login\">\r\n          ${ user.login\r\n            ? '<a class=\"gitment-editor-logout-link\">Logout</a>'\r\n            : user.isLoggingIn\r\n              ? 'Logging in...'\r\n              : `<a class=\"gitment-editor-login-link\" href=\"${instance.loginLink}\">Login</a> with GitHub`\r\n          }\r\n        </div>\r\n      </div>\r\n      <div class=\"gitment-editor-body\">\r\n        <div class=\"gitment-editor-write-field\">\r\n          <textarea placeholder=\"Leave a comment\" title=\"${disabledTip}\" ${shouldDisable}></textarea>\r\n        </div>\r\n        <div class=\"gitment-editor-preview-field gitment-hidden\">\r\n          <div class=\"gitment-editor-preview gitment-markdown\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"gitment-editor-footer\">\r\n      <a class=\"gitment-editor-footer-tip\" href=\"https://guides.github.com/features/mastering-markdown/\" target=\"_blank\">\r\n        Styling with Markdown is supported\r\n      </a>\r\n      <button class=\"gitment-editor-submit\" title=\"${disabledTip}\" ${shouldDisable}>Comment</button>\r\n    </div>\r\n  `\r\n  if (user.login) {\r\n    container.querySelector('.gitment-editor-logout-link').onclick = () => instance.logout()\r\n  }\r\n\r\n  const writeField = container.querySelector('.gitment-editor-write-field')\r\n  const previewField = container.querySelector('.gitment-editor-preview-field')\r\n\r\n  const textarea = writeField.querySelector('textarea')\r\n  textarea.oninput = () => {\r\n    textarea.style.height = 'auto'\r\n    const style = window.getComputedStyle(textarea, null)\r\n    const height = parseInt(style.height, 10)\r\n    const clientHeight = textarea.clientHeight\r\n    const scrollHeight = textarea.scrollHeight\r\n    if (clientHeight < scrollHeight) {\r\n      textarea.style.height = (height + scrollHeight - clientHeight) + 'px'\r\n    }\r\n  }\r\n\r\n  const [writeTab, previewTab] = container.querySelectorAll('.gitment-editor-tab')\r\n  writeTab.onclick = () => {\r\n    writeTab.classList.add('gitment-selected')\r\n    previewTab.classList.remove('gitment-selected')\r\n    writeField.classList.remove('gitment-hidden')\r\n    previewField.classList.add('gitment-hidden')\r\n\r\n    textarea.focus()\r\n  }\r\n  previewTab.onclick = () => {\r\n    previewTab.classList.add('gitment-selected')\r\n    writeTab.classList.remove('gitment-selected')\r\n    previewField.classList.remove('gitment-hidden')\r\n    writeField.classList.add('gitment-hidden')\r\n\r\n    const preview = previewField.querySelector('.gitment-editor-preview')\r\n    const content = textarea.value.trim()\r\n    if (!content) {\r\n      preview.innerText = 'Nothing to preview'\r\n      return\r\n    }\r\n\r\n    preview.innerText = 'Loading preview...'\r\n    instance.markdown(content)\r\n      .then(html => preview.innerHTML = html)\r\n  }\r\n\r\n  const submitButton = container.querySelector('.gitment-editor-submit')\r\n  submitButton.onclick = () => {\r\n    submitButton.innerText = 'Submitting...'\r\n    submitButton.setAttribute('disabled', true)\r\n    instance.post(textarea.value.trim())\r\n      .then(data => {\r\n        textarea.value = ''\r\n        textarea.style.height = 'auto'\r\n        submitButton.removeAttribute('disabled')\r\n        submitButton.innerText = 'Comment'\r\n      })\r\n      .catch(e => {\r\n        alert(e)\r\n        submitButton.removeAttribute('disabled')\r\n        submitButton.innerText = 'Comment'\r\n      })\r\n  }\r\n\r\n  return container\r\n}\r\n\r\nfunction renderFooter() {\r\n  const container = document.createElement('div')\r\n  container.lang = \"en-US\"\r\n  container.className = 'gitment-container gitment-footer-container'\r\n  container.innerHTML = `\r\n    Powered by\r\n    <a class=\"gitment-footer-project-link\" href=\"https://github.com/imsun/gitment\" target=\"_blank\">\r\n      Gitment\r\n    </a>\r\n  `\r\n  return container\r\n}\r\n\r\nfunction render(state, instance) {\r\n  const container = document.createElement('div')\r\n  container.lang = \"en-US\"\r\n  container.className = 'gitment-container gitment-root-container'\r\n  container.appendChild(instance.renderHeader(state, instance))\r\n  container.appendChild(instance.renderComments(state, instance))\r\n  container.appendChild(instance.renderEditor(state, instance))\r\n  container.appendChild(instance.renderFooter(state, instance))\r\n  return container\r\n}\r\n\r\nexport default { render, renderHeader, renderComments, renderEditor, renderFooter }\r\n"]}